<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j">

<body>
<ui:composition template="/templates/template.xhtml">

	<ui:define name="title">#{msgs.applicationName}</ui:define>

	<ui:define name="body">
		<style type="text/css">
		</style>
		<h1><h:outputText value="#{msgs.applicationName}" /></h1>
		<h:panelGrid columns="2" columnClasses="main-part, main-part">
			<h:form id="playingArea">
				<h:panelGrid columns="3" columnClasses="first-column, second-column, third-column" rowClasses="first-row, second-row, third-row">

					<h:graphicImage id="image0" value="#{gameBean.images[0]}">
						<a4j:support event="onclick" reRender="#{gameBean.reRender}"
							action="#{gameBean.click}">
							<a4j:actionparam assignTo="#{gameBean.imageNumber}" value="0" />
						</a4j:support>
					</h:graphicImage>

					<h:graphicImage id="image1" value="#{gameBean.images[1]}">
						<a4j:support event="onclick" reRender="#{gameBean.reRender}"
							action="#{gameBean.click}">
							<a4j:actionparam assignTo="#{gameBean.imageNumber}" value="1" />
						</a4j:support>
					</h:graphicImage>

					<h:graphicImage id="image2" value="#{gameBean.images[2]}">
						<a4j:support event="onclick" reRender="#{gameBean.reRender}"
							action="#{gameBean.click}">
							<a4j:actionparam assignTo="#{gameBean.imageNumber}" value="2" />
						</a4j:support>
					</h:graphicImage>

					<h:graphicImage id="image3" value="#{gameBean.images[3]}">
						<a4j:support event="onclick" reRender="#{gameBean.reRender}"
							action="#{gameBean.click}">
							<a4j:actionparam assignTo="#{gameBean.imageNumber}" value="3" />
						</a4j:support>
					</h:graphicImage>

					<h:graphicImage id="image4" value="#{gameBean.images[4]}">
						<a4j:support event="onclick" reRender="#{gameBean.reRender}"
							action="#{gameBean.click}">
							<a4j:actionparam assignTo="#{gameBean.imageNumber}" value="4" />
						</a4j:support>
					</h:graphicImage>

					<h:graphicImage id="image5" value="#{gameBean.images[5]}">
						<a4j:support event="onclick" reRender="#{gameBean.reRender}"
							action="#{gameBean.click}">
							<a4j:actionparam assignTo="#{gameBean.imageNumber}" value="5" />
						</a4j:support>
					</h:graphicImage>

					<h:graphicImage id="image6" value="#{gameBean.images[6]}">
						<a4j:support event="onclick" reRender="#{gameBean.reRender}"
							action="#{gameBean.click}">
							<a4j:actionparam assignTo="#{gameBean.imageNumber}" value="6" />
						</a4j:support>
					</h:graphicImage>

					<h:graphicImage id="image7" value="#{gameBean.images[7]}">
						<a4j:support event="onclick" reRender="#{gameBean.reRender}"
							action="#{gameBean.click}">
							<a4j:actionparam assignTo="#{gameBean.imageNumber}" value="7" />
						</a4j:support>
					</h:graphicImage>

					<h:graphicImage id="image8" value="#{gameBean.images[8]}">
						<a4j:support event="onclick" reRender="#{gameBean.reRender}"
							action="#{gameBean.click}">
							<a4j:actionparam assignTo="#{gameBean.imageNumber}" value="8" />
						</a4j:support>
					</h:graphicImage>

				</h:panelGrid>
			</h:form>

			<h:panelGrid columns="1">
				<rich:tabPanel switchType="ajax" width="300px">
					<rich:tab id="settings" label="Settings">
						<h:form id="settingsForm">
							<rich:dataTable value="#{gameBean.players}" var="player"
								rowKeyVar="playerNumber" width="100%">

								<rich:column style="padding-left: 6px; padding-right: 6px;">
									<h:outputText value="#{playerNumber == 0 ? 'X' : 'O'}" />
								</rich:column>

								<rich:column style="width: 100px;">
									<f:facet name="header">Name</f:facet>
									<rich:inplaceInput id="name" value="#{player.name}"
										required="true">
										<a4j:support event="onviewactivated" reRender="name" />
									</rich:inplaceInput>
								</rich:column>

								<rich:column style="width: 100px;">
									<f:facet name="header">Player Type</f:facet>
									<h:selectOneMenu id="playerType#{playerNumber}"
										value="#{player.type}" style="width: 100%;">
										<f:selectItems value="#{gameBean.playersItems}" />
										<a4j:support action="#{gameBean.newGame}"
											reRender="playingArea" event="onchange" />
									</h:selectOneMenu>
								</rich:column>

								<rich:column>
									<f:facet name="header">First</f:facet>

									<h:selectBooleanCheckbox id="playingFirst" value="#{player.first}">
										<a4j:support event="onchange"
											reRender="settingsForm, playingArea"
											action="#{gameBean.selectFirstPlayer}">
											<a4j:actionparam name="playerNumberXXX"
												assignTo="#{gameBean.player}" value="#{playerNumber}" />
										</a4j:support>
									</h:selectBooleanCheckbox>

								</rich:column>

							</rich:dataTable>
							<a4j:commandButton action="#{gameBean.newGame}" value="New Game"
								reRender="playingArea, statsForm"
								style="float: left, bottom; margin-top: 5px;" />
						</h:form>
					</rich:tab>

					<rich:tab id="stats" label="Statistics">
						<h:form id="statsForm">
							<rich:dataTable value="#{gameBean.players}" var="player" width="100%">

								<rich:column>
							#{player.name}
							<f:facet name="footer">ties</f:facet>
								</rich:column>

								<rich:column style="text-align: center; width: 35px;" footerClass="center-text">
									<f:facet name="header">Wins</f:facet>
							#{player.wins}
							<f:facet name="footer">#{gameBean.ties}</f:facet>
								</rich:column>

								<rich:column style="text-align: center; width: 35px;" footerClass="center-text">
									<f:facet name="header">%</f:facet>
									<h:outputText
										value="#{gameBean.games == 0 ? 0 : (player.wins / gameBean.games * 100)}">
										<f:convertNumber maxFractionDigits="2" minFractionDigits="2" />
									</h:outputText>
									<f:facet name="footer">
									<h:outputText
										value="#{gameBean.games == 0 ? 0 : (gameBean.ties / gameBean.games * 100)}">
										<f:convertNumber maxFractionDigits="2" minFractionDigits="2" />
									</h:outputText>
									</f:facet>
								</rich:column>

							</rich:dataTable>

							<a4j:commandButton action="#{gameBean.newGame}" value="New Game"
								reRender="playingArea, statsForm"
								style="float: left, bottom; margin-top: 5px;" />
							<a4j:commandButton action="#{gameBean.clearStats}"
								value="Clear Stats" reRender="statsForm"
								style="float: right; margin-top: 5px;" />
						</h:form>
					</rich:tab>
				</rich:tabPanel>

			</h:panelGrid>
		</h:panelGrid>

	</ui:define>

</ui:composition>
</body>
</html>
